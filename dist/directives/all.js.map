{"version":3,"sources":["../../src/directives/all.js"],"names":["angular","_","module","directive","templateUrl","scope","ctrl","endpoint","$compile","datasourceSrv","timeSrv","check","link","init","time","from","frequency","to","metricsQuery","range","timeRange","rangeRaw","interval","targets","target","slug","type","toLowerCase","format","maxDataPoints","datasource","get","then","ds","query","results","showHealth","data","metrics","okCount","errorCount","unknownCount","collectorResults","forEach","result","parts","split","stateStr","collector","ts","state","i","datapoints","length","point","isNaN","console","log","col","unknowns","getProbesForCheck","Object","keys","eventReady","filter","object","equals","addCommasToInteger","controlKeys","hasMultipleDecimals","isNotControlKey","isNotDigit","isNumber","makeIsValid","makeMaxDecimals","makeMaxDigits","makeMaxNumber","makeMinNumber","val","parseFloat","isFinite","which","indexOf","toString","maxDecimals","regexString","validRegex","RegExp","test","maxNumber","number","minNumber","maxDigits","options","validations","push","max","min","_i","_ref","Number","commas","decimals","wholeNumbers","replace","restrict","require","elem","attrs","ngModelCtrl","isValid","$eval","$parsers","unshift","viewVal","noCommasVal","$setValidity","$formatters","nullDisplay","prepend","append","on","formatter","viewValue","_len","$modelValue","$viewValue","$render","select","preventInvalidInput","e","preventDefault","$window","$timeout","probes","model","bodyEl","element","document","body","selectedIds","selectedTags","route","config","ids","footprint","value","tags","error","reset","seenTags","sortedProbes","sortBy","o","name","c","option","id","selected","text","sort","t","show","selectorOpen","giveFocus","bodyOnClick","idSelected","selectAll","map","tagSelected","probesWithTags","probeList","join","probeCount","tag","count","selectTagTitle","slice","selectIdTitle","routeTypeChange","hide","off","dropdown","find","has","$apply","$watch"],"mappings":"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","file":"all.js","sourcesContent":["import angular from 'angular';\nimport _ from 'lodash';\n\nangular.module('grafana.directives').directive(\"rtEndpointHealthDashboard\", function() {\n  return {\n    templateUrl: 'public/plugins/raintank-worldping-app/directives/partials/endpointHealthDashboard.html',\n    scope: {\n      ctrl: \"=\",\n      endpoint: \"=\"\n    }\n  };\n});\n\nangular.module('grafana.directives').directive(\"rtCheckHealth\", function($compile, datasourceSrv, timeSrv) {\n  return {\n    templateUrl: 'public/plugins/raintank-worldping-app/directives/partials/checkHealth.html',\n    scope: {\n      check: \"=\",\n      ctrl: \"=\"\n    },\n    link: function(scope) {\n      timeSrv.init({\n        time: {from: \"now-\"+(scope.check.frequency + 30)+ 's', to: \"now\"}\n      });\n      var metricsQuery = {\n        range: timeSrv.timeRange(),\n        rangeRaw: timeSrv.timeRange(true),\n        interval: scope.check.frequency + 's',\n        targets: [\n          {target: \"worldping.\"+scope.ctrl.endpoint.slug + \".*.\" +\n            scope.check.type.toLowerCase()+\".{ok_state,error_state}\"}\n        ],\n        format: 'json',\n        maxDataPoints: 10,\n      };\n\n      var datasource = datasourceSrv.get('raintank');\n      datasource.then(function(ds) {\n        ds.query(metricsQuery).then(function(results) {\n          showHealth(results);\n        }, function() {\n          showHealth({data: []});\n        });\n      });\n\n      function showHealth(metrics) {\n        var okCount = 0;\n        var errorCount = 0;\n        var unknownCount = 0;\n        var collectorResults = {};\n        _.forEach(metrics.data, function(result) {\n          var parts = result.target.split('.');\n          var stateStr = parts[4];\n          var collector = parts[2];\n          if (!(collector in collectorResults)) {\n            collectorResults[collector] = {ts: -1, state: -1};\n          }\n\n          //start with the last point and work backwards till we find a non-null value.\n          for (var i = result.datapoints.length - 1 ; i >= 0; i--) {\n            var point = result.datapoints[i];\n            if (!isNaN(point[0])) {\n              if ((point[0] === 1) && (point[1] > collectorResults[collector].ts)) {\n                collectorResults[collector].ts = point[1];\n                switch (stateStr) {\n                  case 'ok_state':\n                    collectorResults[collector].state = 0;\n                    break;\n                  case 'error_state':\n                    collectorResults[collector].state = 2;\n                    break;\n                  default:\n                    collectorResults[collector].state = -1;\n                    console.log(\"unknown state returned. this shouldnt happen :(\");\n                }\n                break;\n              }\n            }\n          }\n        });\n        for (var col in collectorResults) {\n          switch (collectorResults[col].state) {\n          case 0:\n            okCount++;\n            break;\n          case 2:\n            errorCount++;\n            break;\n          default:\n            unknownCount++;\n          }\n        }\n        var unknowns = scope.ctrl.getProbesForCheck(scope.check.type).length - Object.keys(collectorResults).length;\n        unknownCount += unknowns;\n\n        scope.okCount = okCount;\n        scope.errorCount = errorCount;\n        scope.unknownCount = unknownCount;\n        scope.eventReady = true;\n      }\n    }\n  };\n});\n\n\nangular.module('grafana.directives').filter('isEmpty', [function() {\n  return function(object) {\n    return !angular.equals({}, object);\n  }\n}])\n\n\n\n\nangular.module('grafana.directives').directive('fcsaNumber', function() {\n    var addCommasToInteger, controlKeys, hasMultipleDecimals, isNotControlKey, isNotDigit, isNumber, makeIsValid, makeMaxDecimals, makeMaxDigits, makeMaxNumber, makeMinNumber;\n    isNumber = function(val) {\n      return !isNaN(parseFloat(val)) && isFinite(val);\n    };\n    isNotDigit = function(which) {\n      return which < 45 || which > 57 || which === 47;\n    };\n    controlKeys = [0, 8, 13];\n    isNotControlKey = function(which) {\n      return controlKeys.indexOf(which) === -1;\n    };\n    hasMultipleDecimals = function(val) {\n      return (val != null) && val.toString().split('.').length > 2;\n    };\n    makeMaxDecimals = function(maxDecimals) {\n      var regexString, validRegex;\n      if (maxDecimals > 0) {\n        regexString = \"^-?\\\\d*\\\\.?\\\\d{0,\" + maxDecimals + \"}$\";\n      } else {\n        regexString = \"^-?\\\\d*$\";\n      }\n      validRegex = new RegExp(regexString);\n      return function(val) {\n        return validRegex.test(val);\n      };\n    };\n    makeMaxNumber = function(maxNumber) {\n      return function(val, number) {\n        return number <= maxNumber;\n      };\n    };\n    makeMinNumber = function(minNumber) {\n      return function(val, number) {\n        return number >= minNumber;\n      };\n    };\n    makeMaxDigits = function(maxDigits) {\n      var validRegex;\n      validRegex = new RegExp(\"^-?\\\\d{0,\" + maxDigits + \"}(\\\\.\\\\d*)?$\");\n      return function(val) {\n        return validRegex.test(val);\n      };\n    };\n    makeIsValid = function(options) {\n      var validations;\n      validations = [];\n      if (options.maxDecimals != null) {\n        validations.push(makeMaxDecimals(options.maxDecimals));\n      }\n      if (options.max != null) {\n        validations.push(makeMaxNumber(options.max));\n      }\n      if (options.min != null) {\n        validations.push(makeMinNumber(options.min));\n      }\n      if (options.maxDigits != null) {\n        validations.push(makeMaxDigits(options.maxDigits));\n      }\n      return function(val) {\n        var i, number, _i, _ref;\n        if (!isNumber(val)) {\n          return false;\n        }\n        if (hasMultipleDecimals(val)) {\n          return false;\n        }\n        number = Number(val);\n        for (i = _i = 0, _ref = validations.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n          if (!validations[i](val, number)) {\n            return false;\n          }\n        }\n        return true;\n      };\n    };\n    addCommasToInteger = function(val) {\n      var commas, decimals, wholeNumbers;\n      decimals = val.indexOf('.') == -1 ? '' : val.replace(/^\\d+(?=\\.)/, '');\n      wholeNumbers = val.replace(/(\\.\\d+)$/, '');\n      commas = wholeNumbers.replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,');\n      return \"\" + commas + decimals;\n    };\n    return {\n      restrict: 'A',\n      require: 'ngModel',\n      scope: {\n        options: '@fcsaNumber'\n      },\n      link: function(scope, elem, attrs, ngModelCtrl) {\n        var isValid, options;\n        options = {};\n        if (scope.options != null) {\n          options = scope.$eval(scope.options);\n        }\n        isValid = makeIsValid(options);\n        ngModelCtrl.$parsers.unshift(function(viewVal) {\n          var noCommasVal;\n          noCommasVal = viewVal.replace(/,/g, '');\n          if (isValid(noCommasVal) || !noCommasVal) {\n            ngModelCtrl.$setValidity('fcsaNumber', true);\n            return noCommasVal;\n          } else {\n            ngModelCtrl.$setValidity('fcsaNumber', false);\n            return void 0;\n          }\n        });\n        ngModelCtrl.$formatters.push(function(val) {\n          if ((options.nullDisplay != null) && (!val || val === '')) {\n            return options.nullDisplay;\n          }\n          if ((val == null) || !isValid(val)) {\n            return val;\n          }\n          ngModelCtrl.$setValidity('fcsaNumber', true);\n          val = addCommasToInteger(val.toString());\n          if (options.prepend != null) {\n            val = \"\" + options.prepend + val;\n          }\n          if (options.append != null) {\n            val = \"\" + val + options.append;\n          }\n          return val;\n        });\n        elem.on('blur', function() {\n          var formatter, viewValue, _i, _len, _ref;\n          viewValue = ngModelCtrl.$modelValue;\n          if ((viewValue == null) || !isValid(viewValue)) {\n            return;\n          }\n          _ref = ngModelCtrl.$formatters;\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            formatter = _ref[_i];\n            viewValue = formatter(viewValue);\n          }\n          ngModelCtrl.$viewValue = viewValue;\n          return ngModelCtrl.$render();\n        });\n        elem.on('focus', function() {\n          var val;\n          val = elem.val();\n          if (options.prepend != null) {\n            val = val.replace(options.prepend, '');\n          }\n          if (options.append != null) {\n            val = val.replace(options.append, '');\n          }\n          elem.val(val.replace(/,/g, ''));\n          return elem[0].select();\n        });\n        if (options.preventInvalidInput === true) {\n          return elem.on('keypress', function(e) {\n            if (isNotDigit(e.which && isNotControlKey(e.which))) {\n              return e.preventDefault();\n            }\n          });\n        }\n      }\n    };\n  });\n\n\n\nangular.module('grafana.directives').directive(\"rtEndpointHealth\", function() {\n  return {\n    templateUrl: 'public/plugins/raintank-worldping-app/directives/partials/endpointHealth.html',\n    scope: {\n      endpoint: \"=\",\n      ctrl: \"=\"\n    }\n  };\n});\n\nangular.module('grafana.directives').directive('endpointProbeSelect', function($compile, $window, $timeout) {\n  return {\n    scope: {\n      probes: \"=\",\n      model: \"=\",\n    },\n    templateUrl: 'public/plugins/raintank-worldping-app/directives/partials/endpointCollectorSelect.html',\n    link: function(scope, elem) {\n      var bodyEl = angular.element($window.document.body);\n      var selectedIds = [];\n      var selectedTags = [];\n\n      scope.init = function() {\n        if (scope.model.route.type === 'byIds') {\n          selectedIds = scope.model.route.config.ids;\n          scope.footprint = {value: \"static\"};\n        } else {\n          selectedTags = scope.model.route.config.tags;\n          scope.footprint = {value: \"dynamic\"};\n        }\n        scope.error = false;\n\n        scope.reset();\n      };\n\n      scope.reset = function() {\n        scope.error = false;\n        scope.ids = [];\n        scope.tags = [];\n        //build out our list of collectorIds and tags\n        var seenTags = {};\n        var sortedProbes = _.sortBy(scope.probes, function(o) {\n          return o.name.toLowerCase();\n        });\n        _.forEach(sortedProbes, function(c) {\n          var option = {id: c.id, selected: false, text: c.name};\n          if (_.indexOf(selectedIds, c.id) >= 0) {\n            option.selected = true;\n          }\n          _.forEach(c.tags.sort(), function(t) {\n            if (!(t in seenTags)) {\n              seenTags[t] = true;\n              var o = {selected: false, text: t};\n              if (_.indexOf(selectedTags, t) >= 0) {\n                o.selected = true;\n              }\n              scope.tags.push(o);\n            }\n          });\n          scope.ids.push(option);\n        });\n        if (scope.footprint.value === 'dynamic') {\n          _.forEach(scope.ids, function(i) {\n            i.selected = false;\n          });\n        } else {\n          _.forEach(scope.tags, function(t) {\n            t.selected = false;\n          });\n        }\n      };\n\n      scope.show = function() {\n        scope.reset();\n        scope.selectorOpen = true;\n        scope.giveFocus = 1;\n\n        $timeout(function() {\n          bodyEl.on('click', scope.bodyOnClick);\n        }, 0, false);\n      };\n\n      scope.idSelected = function(option) {\n        option.selected = !option.selected;\n      };\n\n      scope.selectAll = function() {\n        var select = true;\n        selectedIds = _.map(_.filter(scope.ids, {selected: true}), \"id\");\n\n        if (selectedIds.length === scope.ids.length) {\n          select = false;\n        }\n        _.forEach(scope.ids, function(option) {\n          option.selected = select;\n        });\n      };\n\n      scope.tagSelected = function(option) {\n        option.selected = !option.selected;\n      };\n\n      scope.probesWithTags = function() {\n        var probeList = {};\n        _.forEach(scope.probes, function(c) {\n          _.forEach(_.filter(scope.tags, {selected: true}), function(t) {\n            if (_.indexOf(c.tags, t.text) !== -1) {\n              probeList[c.name] = true;\n            }\n          });\n        });\n        return Object.keys(probeList).join(', ');\n      };\n\n      scope.probeCount = function(tag) {\n        var count = 0;\n        _.forEach(scope.probes, function(c) {\n          if (_.indexOf(c.tags, tag.text) !== -1) {\n            count++;\n          }\n        });\n        return count;\n      };\n\n      scope.selectTagTitle = function() {\n        selectedTags = _.map(_.filter(scope.tags, {selected: true}), \"text\");\n        if (selectedTags.length === 0) {\n          return \"Select Tags\";\n        }\n        if (selectedTags.length <= 2) {\n          return selectedTags.join(\", \");\n        }\n        return selectedTags.slice(0, 2).join(\", \") + \" and \" + (selectedTags.length - 2) + \" more\";\n      };\n\n      scope.selectIdTitle = function() {\n        selectedIds = _.map(_.filter(scope.ids, {selected: true}), \"id\");\n        if (selectedIds.length === 0) {\n          return \"Select Probes\";\n        }\n        if (selectedIds.length <= 2) {\n          return _.map(_.filter(scope.ids, {selected: true}), \"text\").join(\", \");\n        }\n        return _.map(_.filter(scope.ids, {selected: true}), \"text\").slice(0, 2).join(\", \") + \" and \" + (selectedIds.length - 2) + \" more\";\n      };\n\n      scope.routeTypeChange = function() {\n        if (scope.footprint.value === 'dynamic') {\n          selectedTags = _.map(_.filter(scope.tags, {selected: true}), \"text\");\n          scope.model.route = {\n            type: \"byTags\",\n            config: {\n              tags: []\n            }\n          };\n          _.forEach(selectedTags, function(t) {\n            scope.model.route.config.tags.push(t.text);\n          });\n        } else {\n          selectedIds = _.map(_.filter(scope.ids, {selected: true}), \"id\");\n          scope.model.route = {\n            type: \"byIds\",\n            config: {\n              ids: []\n            }\n          };\n          _.forEach(selectedIds, function(c) {\n            scope.model.route.config.ids.push(c.id);\n          });\n        }\n      };\n\n      scope.hide = function() {\n        if (scope.footprint.value === 'dynamic') {\n          scope.model.route = {\n            type: \"byTags\",\n            config: {\n              tags: []\n            }\n          };\n          selectedTags = _.map(_.filter(scope.tags, {selected: true}), \"text\");\n          _.forEach(selectedTags, function(t) {\n            scope.model.route.config.tags.push(t);\n          });\n        } else {\n          scope.model.route = {\n            type: \"byIds\",\n            config: {\n              ids: []\n            }\n          };\n          selectedIds = _.map(_.filter(scope.ids, {selected: true}), \"id\");\n          _.forEach(selectedIds, function(c) {\n            scope.model.route.config.ids.push(c);\n          });\n        }\n        scope.selectorOpen = false;\n        bodyEl.off('click', scope.bodyOnClick);\n      };\n\n      scope.bodyOnClick = function(e) {\n        var dropdown = elem.find('.variable-value-dropdown');\n        if (dropdown.has(e.target).length === 0) {\n          scope.$apply(scope.hide);\n        }\n      };\n\n      scope.$watch('model.id', function() {\n        scope.init();\n      });\n    },\n  };\n});\n"]}